# 蚕 <small> Silkworm </small>
破坏桑树树叶或灌木有概率掉落，生命值、饥饿值、年龄、性别、生长系数和患病系数等属性不同。
在养蚕盒中喂养产出蚕丝，可以制成线。
由蚕的生命活动和初始属性决定，蚕在物品栏中一段时间后必然会死亡。

## 养蚕

### 蚕本身

#### 蚕有以下属性：
Int 年龄
Int 性别
Float 生命值
Float 饥饿值
Float 基础生长系数
Float 基础患病系数
Float 实际生长系数
Float 实际患病系数
Boolean 生病
Boolean 受保护
Boolean 非自然死亡
Boolean 湿润

#### 蚕的生长根据年龄分为以下阶段：
0 ~ 1200：卵
1200 ~ 1500：幼虫（一龄）
1500 ~ 1600：幼虫（一龄）休眠
1600 ~ 1850：幼虫（二龄）
1850 ~ 1950：幼虫（二龄）休眠
1950 ~ 2250：幼虫（三龄）
2250 ~ 2370：幼虫（三龄）休眠
2370 ~ 2700：幼虫（四龄）
2700 ~ 2850：幼虫（四龄）休眠
2850 ~ 3600：幼虫（五龄）
3600 ~ 4000：蛹期（上簇吐丝）
4000 ~ 4500：蛹期（成茧）
4500 ~ 5000：蛹期（熟茧）
5000 ~ 6500：成虫（化蛾）
6500+：死亡

#### 当获得蚕时，蚕的初始属性应如下：
Int 年龄 0~2000
Int 性别 0~1（0为雄性，1为雌性）
Float 生命值 50 ~ 100
Float 饥饿值 50 ~ 100
Float 基础生长系数 0.8 ~ 1.2
Float 基础患病系数 0.8 ~ 1.2
Float 实际生长系数 生长系数
Float 实际患病系数 患病系数
Boolean 生病 False
Boolean 受保护 False
Boolean 非自然死亡 False
Boolean 湿润 False

**注：除非特别指出，下面提到的生长系数和患病系数均为实际生长系数和实际患病系数。**

#### 蚕的正常生命活动：
平均每生长系数秒，且饥饿值大于零时，蚕的年龄会增加一，生长同时蚕的饥饿值额外减少0.01，处于眠期或蛹期时则额外减少的值为0.02。
平均每秒蚕的饥饿值减少0.01，当饥饿值不大于零时，平均每秒生命值减少1.0，且停止生长发育。
当蚕在养蚕箱内，蚕的受保护标签为True，否则为False。
当蚕的生命值为0时蚕会非自然死亡，所有的生命活动都会停止。

#### 当蚕未受保护时：
平均每秒生命值额外减少0.1。
平均每秒生病的概率为0.1%。

#### 当蚕受保护时：
平均每秒生病的概率为0.002%。

#### 当蚕生病时：
平均每秒有0.6%的概率康复。
蚕生长发育的速度减半。
平均每秒饥饿值额外减少0.01。
平均每秒生命值额外减少0.5。
蚕更少进食。

#### 当蚕处于眠期时：
蚕无法进食。
蚕的患病系数变为原来的八倍。

### 养蚕盒

#### 养蚕盒的基本信息：
Double 湿度
Double 温度
Double 肮脏度
Boolean 是否撒上石灰

蚕周围至少要有一片桑叶养蚕盒才能起到保护作用。
养蚕盒还有一个储水的储罐，容量1000mb，每片桑叶平均每秒消耗1mb水，若缺水养蚕盒失去保护作用且蚕不会进食。

#### 常规
养蚕盒内有4×4的空间，可以摆放桑叶或蚕。
桑叶可以附近一格（不包括对角线）的蚕食用，每片可以被吃64次。
设周围桑叶的数量为$N$，饥饿值为$M$
蚕在饥饿值小于$25N$时平均每秒有$\frac{N(25N - M) ^ 2} {25} \%$的概率食用周围任意一片随机桑叶。
生病时这个概率减半，即每秒有$\frac{N(25N - M) ^ 2} {50} \%$的概率食用周围任意一片随机桑叶。
食用桑叶会使蚕的饥饿值增加5。
若需要繁殖蚕，一般来说相邻桑叶至少应为2片，否则蚕会在蛹期饿死。

#### 防疫
当蚕生病时，它会使周围一格及对角线一格上的蚕的患病系数乘以2.5。
考虑以下情况：

$\begin{matrix} 健康 & 健康 & 生病 \\ 生病 & 生病 & 健康 \\ 健康 & 生病 & 生病 \end{matrix}$

设每只蚕的基础患病系数都为1

$\begin{matrix} 1 & 1 & 1 \\ 1 & 1 & 1 \\ 1 & 1 & 1 \end{matrix}$

我们对每只蚕统计周围一格及对角线一格上患病的蚕的数量为$x$，则实际患病系数为原来的$2.5^x$倍。

则实际患病系数为：

$\begin{matrix} 6.25 & 15.63 & 2.5 \\ 6.25 & 39.06 & 39.06 \\ 15.63 & 15.63 & 6.25 \end{matrix}$

对于第二行第三列的健康蚕，由于它的患病系数为39.06，故它平均每秒有$7.812\%$的概率生病。

石灰粉覆盖在桑叶表面，它能显著降低整个养蚕盒内的患病系数，但会严重阻碍蚕的进食。
由于蚕在眠期时平均每秒患病的概率为原来的八倍，所以一般需要在此时撒上石灰粉进行防疫。

撒上石灰粉后，养蚕盒内的所有虫子的实际患病系数在进行前面的基于周围病蚕的数量的计算后，再除以16。
另外，撒上石灰粉后，养蚕盒内的所有虫子无法进食。

因此，一般的做法是在一定量的蚕都进入蛹期时，将还未进入蛹期的蚕全部取出放入另一个养蚕盒内养殖。

每只蚕在进食后会提高养蚕盒的肮脏度0.05，蚕的实际患病系数在最后会额外加上自身的肮脏度倍。
需要通过清空养蚕盒水槽来将肮脏度清零。

温度和湿度会影响蚕的实际患病系数，这部分内容待完善。

#### 生长速度

温度和湿度会影响蚕的实际生长系数，这部分内容待完善。

#### 收获
蛹期（成茧）和蛹期（熟茧）的蚕可以直接取出，将蛹丢入水中后（蚕立刻死亡）再等待一定时间干燥得到蚕茧，直接合成即可得到4个线，
若有晾晒架，可以将蚕茧继续晾晒得到干蚕茧，直接合成可以得到6个线。

#### 繁殖
蚕化蛾后（即成为成虫后）可以进行繁殖，且此时不再需要进食，饥饿值永远为100。
养蚕盒中任意两对性别相异的成虫随机进行繁殖，繁殖结束后两成虫死亡，雌性成虫直接消失，并在该物品槽内留下一个蚕卵堆，手持右键会直接获得16-32个年龄为0的蚕（卵）。
